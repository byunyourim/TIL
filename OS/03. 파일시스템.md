데이터를 저장하고 관리하는 방식  


운영체제가 저장 장치(HDD, SDD, USB 등)에서 파일을 읽고 쓰고, 데이터 구조에 따라 파일을 정리하는 데 사용된다.  



파일과 디렉터리를 생성, 수정, 삭제 등 관리한다.  
- 유닉스 - 디렉터리
- 윈도우 - 폴더

<br><br><br>

## 무슨 일 해?
파일과 디렉터리에 대한 접근 방법을 제공해~  
그리고 권한이 없는 유저는 못 들어오게 하지~  
파일 망가지지 않게 해야하고, 암호화해서 안전하게 보호해야 돼~!    


<br><br>

파일 시스템은 데이터를 블록 단위로 저장합니다.  
  
하나의 파일은 여러 개의 블록에 걸쳐 저장될 수 있으며, 블록 크기에 따라 파일이 차지하는 공간이 결정됩니다. 

**블록은 저장 장치의 최소 단위**로, 각 블록은 일정한 크기로 나누어져 있어.  


파일 시스템에서 1MB 크기의 파일을 4KB 블록 단위로 저장한다면, 이 파일은 총 256개의 블록에 나누어 저장된다.
파일을 읽을 때는 각 블록의 위치를 알아야 하는데, 파일 시스템은 파일 할당 테이블에 각 블록이 저장된 위치 정보를 가지고 있어.  


    <br>  
    
### 파티션과 블록의 관계
파티션은 물리적인 디스크를 논리적인 단위로 나눈 것으로, 각 파티션마다 독립적으로 사용될 수 있으며, 각 파티션마다 자체적인 파일 시스템을 갖는다.  
하나의 파티션은 여러 개의 블록으로 구성되며, 블록들에는 실제 데이터가 저장된다.  



<br><br><br>

## 파일을 여는 동작 방식
사용자는 example.docx파일을 열기위해 파일을 더블 클릭합니다.   

   
운영체제는 확장자를 확인하고, 이 확장자를 처리할 수 있는 연결 프로그램을 찾습니다.  
`.docx` 확장자를 통해 워드 프로그램에 연결되어 있는 것을 알 수 있어요.  

그러고 나서 운영체제는 docx 파일을 처리할 수 있는 프로그램(워드)을 실행합니다.  
   
그런데 이미 프로그램이 실행 중이라면?   
새로운 인스턴스를 열지 않고 실행 중인 프로그램 내에서 새 파일을 열어요~!  
    
   
Microsoft Word가 설치되어 있다면, 운영 체제는 `winword.exe`를 실행하는데 이 때, Word 프로그램이 메모리에 올라갑니다.  

그리고 운영체제는 example.docx 파일의 경로를 워드 프로그램에 전달합니다.
  
워드 프로그램은 전달 받은 파일 경로를 이용해 문서를 열고, 내부적으로 파일 내용을 읽어 사용자에게 표시합니다.  
   
<br><br>
   
  
`example.docx` 처럼 실제 데이터를 담고 있는 파일을 **데이터 파일**이라 하고, 이를 열고, 편집하는 프로그램이 **응용프로그램**이라고 합니다.    
  
위의 경우 워드 프로세서는 응용프로그램입니다.  
  
**실행 파일**은 코드와 리소스를 가지고 있으며 사용자가 이 파일을 실행하면 운영체제가 프로그램을 메모리에 로드하고 실행합니다.    
     
따라서 응용 프로그램은 사용자가 직접 사용하는 소프트웨어이고, 실행 파일은 응용 프로그램을 실행하는 파일입니다.





<br><br><br>

## 파일 구조
### 순차 파일 구조
- 파일 내용이 순서대로 기록되기 때문에 저장 공간에 낭비되는 부분이 없다.
- 구조가 단순하여 테이프는 물론 플로피디스크나 메모리를 이용한 저장장치에도 적용할 수 있다.
- 순서대로 데이터를 읽고 저장할때 매우 빠르지만, 데이터 삽입 삭제 시 시간이 많이 소요된다.
- 직접 접근이 어려워 순차적으로 이동해야 한다.

### 인덱스 파일 구조
 - 순차 파일 구조 + 인덱스 테이블
 - 순차 접근과 직접 접근이 가능하며, 인덱스 테이블을 여러 개 만들면 다양한 접근이 가능하다.

### 직접 파일 구조
- 저장하려는 데이터의 특정 값에 특정 함수를 이용하여, 물리적인 주소로 바로 변환하는 파일 구조다.
- 예) 해시 함수







<br><br><br>

## 디렉터리의 구조
관련있는 파일을 하나로 모아 놓은 곳으로 디렉터리와 파일을 가질 수 있어~~   
파일을 관리하고, 찾을 수 있어!  
계층적 구조로 구성되며, 특정 경로를 통해 파일과 디렉터리에 접근할 수 있다.  

파일을 주제, 유형별로 그룹화할 수 있어서 원하는 파일을 쉽게 찾을 수 있고, 접근 권한 설정이 가능해서 안정성을 높일 수 있다.   

### 디렉터리
파일을 저장하는 공간으로 다른 파일과 서브 디렉터리를 갖는다. 
파일 시스템 내에서 특정한 경로를 통해 접근할 수 있다.


### 서브 디렉터리
다른 디렉터리 내에 포함된 디렉터리로, 계층 구조를 갖는다.  

```
/
├── home
│   ├── user1
│   │   ├── documents
│   │   ├── downloads
│   │   └── pictures
│   └── user2
│       ├── documents
│       └── music
├── etc
│   ├── config
│   └── network
├── var
│   ├── log
│   └── tmp
└── bin
    ├── bash
    └── ls
```

<br>

### 경로
- 절대 경로 : 루트에서 시작하는 전체 경로 `/home/user1/documents`
- 상대 경로 : 현재 작업 중인 디렉터리에서 시작하는 경로 `../user2/music`



  
<br><br><br>

## 마운트
운영체제에서 파일 시스템을 특정 디렉터리에 연결하여 사용가능하게 만드는 과정이다.  

이 과정을 통해 사용자와 응용프로그램이 저장장치에 접근할 수 있으며, 주로 외부 저장 장치나 네트워크 공유를 연결할 때 사용된다.  

<br>

### 어떻게 마운트되는지
사용자가 USB 드라이브를 컴퓨터에 연결하면 운영 체제는 이 USB 드라이브의 파일 시스템을 인식한다.  

      
운영 체제는 외부 장치의 파일 시스템을 특정 내부 디렉터리(예: /media/usb 또는 D:\)에 마운트하는데,
이를 통해 사용자가 지정한 디렉터리를 통해 외부 장치의 데이터에 접근할 수 있다.   

    
이제 사용자는 `/media/usb`라는 디렉터리로 접근해 USB 드라이브에 저장된 파일과 폴더를 볼 수 있다.   

    




<br><br><br>

## 디스크 파일 할당
전체 디스크 공간을 같은 크기로 나누고 각 공간에 주소를 붙여서 관리한다. (공간 하나를 블록으로 본다.)   
파일 시스템은 파일 테이블을 관리한다.  

### 파일 테이블
- 파티션당 하나씩 존재하며, 파티션의 맨 앞 부분에 위치한다.


### 연속 할당
- 데이터를 디스크상에 연속적으로 배열하는 방식
- 디스크에 남은 공간 중 파일의 크기와 맞는 연속된 공간이 없을 때는 연속 할당이 불가능
### 불연속 할당
- 비어 있는 블록에 데이터를 분산하여 저장하고, 관련 정보를 파일 시스템이 관리하는 방식
- 연결 리스트를 이용한 연결 할당, 인덱스를 이용한 할당이 있다.

  #### 연결 할당
  - 파일에 속한 데이터를 연결 리스트로 관리하는 방식
  - 파일 테이블에는 시작 블록에 대한 정보만 저장하며, 나머지 데이터는 시작 블록에 연결하여 저장한다.
  - 맨 끝에 해당하는 블록에는 널(null)을 삽입
  - 테이블 형태로 관리되며, 윈도우의 FAT이 있다.
  - 테이블을 이용한 방식의 단점은 하나의 파티션이 사용할 수 있는 디스크 용량이 테이블의 주소 크키로 제한된다.
 
    <br>
    
  #### 인덱스 할당
  - 인덱스 할당 방식에서는 테이블의 블록 포인터가 데이터 블록을 연결하는 것이 아니라, 데이터의 인덱스를 담고 있는 인덱스 블록을 연결
-1은 null을 의미
  - 테이블이 꽉 차 더 이상 데이터를 연결할 수 없을 때 인덱스 블록을 연결하는 간접 인덱스 블록(indirect index block)을 만들면 무한히 확장 할 수 있다.
  - 파일 제어 블록: 파일 소유자와 각종 속성
  - 블록 포인터: 데이터가 있는 블록의 위치를 직접 연결하는 포인터
  - 간접 포인터: 크기가 작은 파일은 직접 연결된 블록 포인터로 빠르게 접근할 수 있다. 하지만 크기가 커서 블록 포인터가 다 차면 인덱스 블록을 생성한 후 간접 포인터를 생성하여 인덱스 블록을 연결한다.








