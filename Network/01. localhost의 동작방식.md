## localhost?
내 PC에서 나 자신을 가리키는 주소이다.  

OS의 기본 로컬 라우팅 테이블에 부팅과 동시에 등재된다.  

실제로는 IP 주소를 사용하는데, 고정적으로 127.0.0.1의 주소를 갖는다.  

내 PC에서 localhost로 데이터를 보내면   
외부로 나가지 않고 내 PC로 요청이 다시 들어오는 주소이다.  


실제로 네트워크 계층까지 내려가지 않고, 지연시간이 거의 없어 빠르다는 장점이 있다.  




<br>

## Network Interface
PC에서 인터넷, 통신을 하려면 Wifi, Lan Card가 필요하다.  
이런 장치를 네트워크 인터페이스라고 한다.   

장치를 OS에서 인식하면, 시스템에 장치마다 대응하는 NI를 각각 만든다.  

터미널, 커맨드 창에서 ifconfig, ipconfig /all 등의 명령어를 통해 NI를 확인할 수 있다.  



<br>

### NI는 왜 있는건가요?
NI는 OS에서 네트워크를 사용하기 위해, 장치를 구분하기 위해 존재한다.  

기본적으로 뭔가를 네트워크로 보내려면, 어떤 NI로 데이터를 보낼지 정해야 한다.  

IP주소를 통해 어떤 NI를 사용하면 될지 PC가 알고있다.  

- 192.168.0.0/16 대역으로 나가려면 NI2 번
- 127.0.0.0/8 대역으로 나가려면 NI0 번
- 0.0.0.0/0 그외 모든 대역은 NI1 번

나가고자하는 목적지 IP 주소에 따라 어떤 NI를 사용해야 하는지 OS에서 관리하며,
이것을 네트워크 라우팅 테이블 이라고 한다.  

이렇게 하나의 PC에 여러 개의 통신 장비가 있더라도, 대역을 통해 망을 구분할 수 있다.  

그래서 로컬 네트워크와 인터넷을 구분 할 수도 있고, 여러가지 조합이 가능해진다.  
여러 NI 중에 Loopback NI가 있는데 위의 NI0이다.  



<br>

## Loopback NI
모든 PC에 OS만 설치하면 기본으로 제공 하는 가상의 장치이다.  

실제로 Wifi, Lan이 없어도 존재한다.  

이 장치는 IP주소 중 127.0.0.0/8 범위의 요청을 담당한다.   

127.0.0.0/8 대역은 IP 주소를 정할때부터 애초에 로컬용으로 예약된 대역이다.  
127.0.0.1 은 그 중 첫 번째 IP로, 나 자신을 가리킨다.  

이 장치는 내가 보내는 요청을 받고, 다시 나에게 응답을 돌려주는 통신 장비가 되는 것이다.  

그리고, 가상 장치이므로, 물리적인 통신 과정이 생략되어 매우 빠르게 동작한다.  

결국, 이 Loopback NI가 있어 우리가 localhost를 사용할 수 있는 것이다.


<br><br><br>

## localhost 의 간단한 패킷의 흐름
#### - 웹 브라우저에서 127.0.0.1로 요청
  - 웹 브라우저에서 127.0.0.1 IP는 루프백(Loopback) 주소로, 자기 자신이다.
  - 즉, 이 요청은 외부 네트워크로 나가는 것이 아니라, 자신의 컴퓨터 내에서 처리된다.
#### - 루프백 인터페이스로 요청이 전달
  - 웹 브라우저에서 요청을 보낼 때, 해당 요청은 TCP/IP 스택을 통해 패킷으로 변환된다.
  - 127.0.0.1을 확인하고, 외부로 나가지 않고, Loopback NI로 보낸다.
#### - 로컬 서버로 요청 전달
  - 루프백 인터페이스로 들어온 요청은 서버 애플리케이션으로 전달된다.
  - 여기서 서버는 애플리케이션에서 요청을 처리하고, 적절한 응답을 생성한다.
#### - 응답을 다시 루프백 인터페이스로 전송
  - 서버가 응답을 준비하면, 그 응답 패킷도 127.0.0.1 주소로 전송된다.
  - 응답 또한 클라이언트로 돌아가기 위해 루프백 인터페이스를 경유한다.
  - 이때, 응답이 외부 네트워크로 나가는 것이 아닌, 로컬에서 클라이언트 애플리케이션(브라우저)으로 전달된다.
#### - 응답을 클라이언트(브라우저)로 전달
  - 응답 패킷은 다시 시스템의 TCP/IP 스택을 거쳐 루프백 인터페이스를 통해 브라우저로 전달된다.
  - 브라우저는 응답을 받아 화면에 결과를 렌더링한다.


#### 참고
https://velog.io/@480/localhost-%EC%9D%98-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC
